!function(e){acf.field_group_pro={init:function(){var e=this;acf.add_action("open_field change_field_type sortstop",function(a){e.update_field_parent(a)}),acf.add_action("duplicate_field",function(a){e.duplicate_field(a)}),acf.add_action("delete_field",function(a){e.delete_field(a)}),this.repeater.init(),this.flexible_content.init()},update_field_parent:function(e){var a=e.parent().closest(".field"),t=0;if(a.exists()){var i=a.attr("data-id"),f=a.attr("data-key");t=f,i&&(t=i)}acf.field_group.update_field_meta(e,"parent",t),acf.do_action("update_field_parent",e,a)},duplicate_field:function(a){var t=a.find(".field").not('[data-key="acfcloneindex"]');t.exists()&&t.each(function(){var a=e(this).parent().closest(".field"),t=acf.field_group.get_field_meta(a,"key");acf.field_group.wipe_field(e(this)),acf.field_group.update_field_meta(e(this),"parent",t),acf.field_group.save_field(e(this))})},delete_field:function(a){a.find(".field").not('[data-key="acfcloneindex"]').each(function(){acf.field_group.delete_field(e(this),!1)})}},acf.field_group_pro.repeater={init:function(){var a=this;acf.add_action("open_field change_field_type",function(e){"repeater"==e.attr("data-type")&&(e.find('.acf-field[data-name="layout"]:first input[type="radio"]').attr("data-name","toggle-repeater-layout"),a.render_field(e))}),e(document).on("change",'[data-name="toggle-repeater-layout"]',function(){a.render_field(e(this).closest(".field"))})},render_field:function(e){var a=e.find('tr[data-name="layout"]:first input:checked').val(),t=e.find('tr[data-name="sub_fields"]:first .acf-field-list:first');t.removeClass("layout-row layout-table").addClass("layout-"+a),t.hasClass("ui-sortable")||acf.field_group.sort_fields(t)}},acf.field_group_pro.flexible_content={init:function(){var a=this;e(document).on("click",".acf-fc-add",function(t){t.preventDefault(),a.add_layout(e(this).closest(".acf-field"))}),e(document).on("click",".acf-fc-duplicate",function(t){t.preventDefault(),a.duplicate_layout(e(this).closest(".acf-field"))}),e(document).on("click",".acf-fc-delete",function(t){t.preventDefault(),a.delete_layout(e(this).closest(".acf-field"))}),e(document).on("blur",".acf-fc-meta-label input",function(t){a.change_layout_label(e(this))}),e(document).on("change",".acf-fc-meta-display select",function(t){a.render_layout(e(this).closest(".acf-field"))}),acf.add_action("open_field change_field_type",function(e){"flexible_content"==e.attr("data-type")&&a.render_field(e)}),acf.add_action("update_field_parent",function(e,t){a.update_field_parent(e)})},add_layout:function(e){var a=e.clone(!1);a.find(".field").not('[data-key="acfcloneindex"]').remove(),a.find(".no-fields-message").show(),a.find(".acf-fc-meta input").val(""),this.wipe_layout(a),e.after(a),a.find(".acf-fc-meta select").val("row").trigger("change")},wipe_layout:function(a){var t=a.attr("data-key"),i=acf.get_uniqid();a.attr("data-key",i),a.find('> .acf-input > .acf-hidden [data-name="layout-key"]').val(i),a.find('[id*="'+t+'"]').each(function(){e(this).attr("id",e(this).attr("id").replace("-layouts-"+t+"-","-layouts-"+i+"-"))}),a.find('[name*="'+t+'"]').each(function(){e(this).attr("name",e(this).attr("name").replace("[layouts]["+t+"]","[layouts]["+i+"]"))})},duplicate_layout:function(a){a.find("select").each(function(){e(this).attr("data-val",e(this).val())});var t=a.clone(!1);this.wipe_layout(t),t.find(".field").not('[data-key="acfcloneindex"]').each(function(){acf.field_group.wipe_field(e(this)),acf.field_group.save_field(e(this))}),a.after(t),t.find("select").each(function(){e(this).val(e(this).attr("data-val")).trigger("change")}),t.find(".acf-fc-meta-label input").focus()},delete_layout:function(a){return 0==a.siblings('tr[data-name="fc_layout"]').length?(alert(acf._e("flexible_content","layout_warning")),!1):(a.find(".field").not('[data-key="acfcloneindex"]').each(function(){acf.field_group.delete_field(e(this),!1)}),acf.field_group.save_field(a.closest(".field")),void acf.remove_tr(a))},change_layout_label:function(a){var t=a.closest(".acf-fc-meta").find(".acf-fc-meta-name input");if(""==t.val()){var i=a.val(),f={ä:"a",æ:"a",å:"a",ö:"o",ø:"o",é:"e",ë:"e",ü:"u",ó:"o",ő:"o",ú:"u",é:"e",á:"a",ű:"u",í:"i"," ":"_","'":"","\\?":""};e.each(f,function(e,a){var t=new RegExp(e,"g");i=i.replace(t,a)}),i=i.toLowerCase(),t.val(i).trigger("change")}},render_field:function(a){var t=this,i=a.find("> .field-settings > table > tbody");i.hasClass("ui-sortable")||i.sortable({items:'> tr[data-name="fc_layout"]',handle:".acf-fc-reorder",forceHelperSize:!0,forcePlaceholderSize:!0,scroll:!0,start:function(e,a){acf.do_action("sortstart",a.item,a.placeholder)},stop:function(e,a){acf.do_action("sortstop",a.item,a.placeholder)}}),a.find('tr[data-name="fc_layout"]').each(function(){t.render_layout(e(this));var a=e(this).attr("data-key");e(this).find(".field").each(function(){acf.field_group.update_field_meta(e(this),"parent_layout",a)})})},render_layout:function(e){var a=e.find(".acf-fc-meta .acf-fc-meta-display select").val(),t=e.find(".acf-field-list:first");t.removeClass("layout-row layout-table").addClass("layout-"+a),t.hasClass("ui-sortable")||acf.field_group.sort_fields(t)},update_field_parent:function(e){var a=e.closest("tr.acf-field"),t=acf.field_group.get_field_meta(e,"parent_layout"),i=!1;if(a.exists()&&"fc_layout"==a.attr("data-name")){var f=a.attr("data-key");t!=f&&(acf.field_group.update_field_meta(e,"parent_layout",f),i=!0)}else t&&(acf.field_group.delete_field_meta(e,"parent_layout"),i=!0);i&&acf.field_group.save_field(e)}},acf.add_action("ready",function(){acf.field_group_pro.init()})}(jQuery);